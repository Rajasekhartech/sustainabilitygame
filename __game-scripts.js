pc.script.createLoadingScreen((function(e){var n,t;n=["body {","    background-color: #283538;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #088A08;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    position: absolute;","    margin: 20px auto 0 auto;","    width: 50%;","    left: 25%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 20px;","    width: 100%;","    border: black;","    border-color: white;","    border-style: solid;","    border-width: 5px;","    box-shadow: 5px 5px;","    border-radius: 10px;","    background-color: #A9F5D0;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #088A08;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),document.head.appendChild(t),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var n=document.createElement("div");n.id="application-splash",e.appendChild(n),n.style.display="none";var t=document.createElement("div");t.id="progress-bar-container",n.appendChild(t);var a=document.createElement("div");a.id="progress-bar",t.appendChild(a);var r=document.createElement("img");r.src="data:image/png;base64,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",n.appendChild(r),r.onload=function(){n.style.display="block"}}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var n=document.getElementById("progress-bar");n&&(e=Math.min(1,Math.max(0,e)),n.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));var LineHandler=pc.createScript("lineHandler");LineHandler.attributes.add("CameraEntity",{type:"entity"}),LineHandler.attributes.add("VisualLineEntity",{type:"entity"}),LineHandler.attributes.add("WaterLineEntity",{type:"entity"}),LineHandler.attributes.add("SunLineEntity",{type:"entity"}),LineHandler.attributes.add("StartPosition",{type:"vec3",default:[0,0,0]}),LineHandler.attributes.add("EndPosition",{type:"vec3",default:[5,0,0]}),LineHandler.prototype.initialize=function(){this.StartGroup=null,this.EndGruop=null,this.IsLineMoveable=!1,this.hitPosition=new pc.Vec3,this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.lastTouchPoint=new pc.Vec2,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this))},LineHandler.prototype.onTouchStart=function(t){if(!globalVariables.IsGamePause){var e=t.touches[0];this.lastTouchPoint=t.touches[0];var i=this.CameraEntity.getPosition(),a=this.CameraEntity.camera.screenToWorld(e.x,e.y,this.CameraEntity.camera.farClip),r=this.app.systems.rigidbody.raycastFirst(i,a);if(r&&r.entity.tags.has("TreeGroupPint")&&(this.StartGroup=r.entity.script.treeGroupHandler,!this.StartGroup.IsEnergySourced&&!this.StartGroup.IsDonar&&(this.StartGroup.IsSunNeeded||this.StartGroup.IsWaterNeeded))){this.StartGroup.IsSunNeeded?globalVariables.GameManager.script.gameManager.ShowAvailableSunGroups():this.StartGroup.IsWaterNeeded&&globalVariables.GameManager.script.gameManager.ShowAvailableWaterGroups(),this.IsLineMoveable=!0,this.VisualLineEntity.enabled=!0;var s=r.point;this.StartPosition=r.entity.getPosition(),this.EndPosition=s}}},LineHandler.prototype.onTouchMove=function(t){if(this.IsLineMoveable){var e=t.touches[0];this.lastTouchPoint=t.touches[0];var i=this.CameraEntity.getPosition(),a=this.CameraEntity.camera.screenToWorld(e.x,e.y,this.CameraEntity.camera.farClip),r=this.app.systems.rigidbody.raycastFirst(i,a);if(r){this.StartGroup.IsSunNeeded?globalVariables.GameManager.script.gameManager.ShowAvailableSunGroups():this.StartGroup.IsWaterNeeded&&globalVariables.GameManager.script.gameManager.ShowAvailableWaterGroups();var s=r.point;this.EndPosition=s}}},LineHandler.prototype.onTouchEnd=function(t){if(this.IsLineMoveable){globalVariables.GameManager.script.gameManager.ResetAvailableGroups(),this.IsLineMoveable=!1;var e=this.CameraEntity.getPosition(),i=this.CameraEntity.camera.screenToWorld(this.lastTouchPoint.x,this.lastTouchPoint.y,this.CameraEntity.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(e,i);if(a){var r=a.point;this.EndPosition=r,this.VisualLineEntity.enabled=!1,a.entity.tags.has("TreeGroupPint")&&(this.EndGruop=a.entity.script.treeGroupHandler,this.EndPosition=a.entity.getPosition(),!this.EndGruop.IsWaterSourced||!this.StartGroup.IsWaterNeeded||this.EndGruop.IsDonar||this.EndGruop.IsEnergySourced||this.EndGruop.IsSunNeeded||this.EndGruop.IsTreeDead?!this.EndGruop.IsSunSourced||!this.StartGroup.IsSunNeeded||this.EndGruop.IsDonar||this.EndGruop.IsEnergySourced||this.EndGruop.IsWaterNeeded||this.EndGruop.IsTreeDead||(this.StartGroup.DonarTreeGroupIndex=this.EndGruop.TreeGroupIndex,this.EndGruop.IsDonar=!0,this.CreateSunPipeLine(this.StartPosition,this.EndPosition,this.StartGroup)):(this.StartGroup.DonarTreeGroupIndex=this.EndGruop.TreeGroupIndex,this.EndGruop.IsDonar=!0,this.CreateWaterPipeLine(this.StartPosition,this.EndPosition,this.StartGroup)))}}},LineHandler.prototype.onMouseDown=function(t){if(!globalVariables.IsGamePause){var e=this.CameraEntity.getPosition(),i=this.CameraEntity.camera.screenToWorld(t.x,t.y,this.CameraEntity.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(e,i);if(a&&a.entity.tags.has("TreeGroupPint")&&(this.StartGroup=a.entity.script.treeGroupHandler,!this.StartGroup.IsEnergySourced&&!this.StartGroup.IsDonar&&(this.StartGroup.IsSunNeeded||this.StartGroup.IsWaterNeeded))){this.StartGroup.IsSunNeeded?globalVariables.GameManager.script.gameManager.ShowAvailableSunGroups():this.StartGroup.IsWaterNeeded&&globalVariables.GameManager.script.gameManager.ShowAvailableWaterGroups(),this.IsLineMoveable=!0,this.VisualLineEntity.enabled=!0;var r=a.point;this.StartPosition=a.entity.getPosition(),this.EndPosition=r}}},LineHandler.prototype.onMouseMove=function(t){if(this.IsLineMoveable){var e=this.CameraEntity.getPosition(),i=this.CameraEntity.camera.screenToWorld(t.x,t.y,this.CameraEntity.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(e,i);if(a){this.StartGroup.IsSunNeeded?globalVariables.GameManager.script.gameManager.ShowAvailableSunGroups():this.StartGroup.IsWaterNeeded&&globalVariables.GameManager.script.gameManager.ShowAvailableWaterGroups();var r=a.point;this.EndPosition=r}}},LineHandler.prototype.onMouseUp=function(t){if(this.IsLineMoveable){globalVariables.GameManager.script.gameManager.ResetAvailableGroups(),this.IsLineMoveable=!1;var e=this.CameraEntity.getPosition(),i=this.CameraEntity.camera.screenToWorld(t.x,t.y,this.CameraEntity.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(e,i);if(a){var r=a.point;this.EndPosition=r,this.VisualLineEntity.enabled=!1,a.entity.tags.has("TreeGroupPint")?(this.EndGruop=a.entity.script.treeGroupHandler,this.EndPosition=a.entity.getPosition(),!this.EndGruop.IsWaterSourced||!this.StartGroup.IsWaterNeeded||this.EndGruop.IsDonar||this.EndGruop.IsEnergySourced||this.EndGruop.IsSunNeeded||this.EndGruop.IsTreeDead?!this.EndGruop.IsSunSourced||!this.StartGroup.IsSunNeeded||this.EndGruop.IsDonar||this.EndGruop.IsEnergySourced||this.EndGruop.IsWaterNeeded||this.EndGruop.IsTreeDead?globalVariables.SoundManager.script.soundManager.PlayLaserError():(this.StartGroup.DonarTreeGroupIndex=this.EndGruop.TreeGroupIndex,this.EndGruop.IsDonar=!0,this.CreateSunPipeLine(this.StartPosition,this.EndPosition,this.StartGroup)):(this.StartGroup.DonarTreeGroupIndex=this.EndGruop.TreeGroupIndex,this.EndGruop.IsDonar=!0,this.CreateWaterPipeLine(this.StartPosition,this.EndPosition,this.StartGroup))):globalVariables.SoundManager.script.soundManager.PlayLaserError()}else globalVariables.SoundManager.script.soundManager.PlayLaserError()}},LineHandler.prototype.update=function(t){if(!globalVariables.IsGamePause&&this.IsLineMoveable){var e=(new pc.Vec3).sub2(this.StartPosition,this.EndPosition).length();this.VisualLineEntity.setPosition(this.StartPosition),this.VisualLineEntity.lookAt(this.EndPosition);var i=this.VisualLineEntity.getLocalScale();i.z=e,this.VisualLineEntity.setLocalScale(i)}},LineHandler.prototype.CreateWaterPipeLine=function(t,e,i){var a=this.WaterLineEntity.clone();a.enabled=!0,this.entity.parent.addChild(a);var r=(new pc.Vec3).sub2(t,e).length();a.setPosition(t),a.lookAt(e);var s=a.getLocalScale();s.z=r,a.setLocalScale(s),i.IsPipeConnected=!0,i.PipeLineEntity=a,i.PipeLineConnected()},LineHandler.prototype.CreateSunPipeLine=function(t,e,i){var a=this.SunLineEntity.clone();a.enabled=!0,this.entity.parent.addChild(a);var r=(new pc.Vec3).sub2(t,e).length();a.setPosition(t),a.lookAt(e);var s=a.getLocalScale();s.z=r,a.setLocalScale(s),i.IsPipeConnected=!0,i.PipeLineEntity=a,i.PipeLineConnected()};var TreeGroupHandler=pc.createScript("treeGroupHandler");TreeGroupHandler.attributes.add("TreeGroupIndex",{type:"number"}),TreeGroupHandler.attributes.add("IsPipeConnected",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("PipeLineEntity",{type:"entity"}),TreeGroupHandler.attributes.add("HealthBarEntity",{type:"entity"}),TreeGroupHandler.attributes.add("HealthBar",{type:"entity"}),TreeGroupHandler.attributes.add("WaterIconEntity",{type:"entity"}),TreeGroupHandler.attributes.add("SunIconEntity",{type:"entity"}),TreeGroupHandler.attributes.add("BarPositionMin",{type:"number",default:0}),TreeGroupHandler.attributes.add("BarPositionMax",{type:"number",default:1}),TreeGroupHandler.attributes.add("EnergyBarRatio",{type:"number",default:.02}),TreeGroupHandler.attributes.add("IsHealthBarActivated",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("IsEnergySourced",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("IsWaterSourced",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("IsSunSourced",{type:"boolean",default:!0}),TreeGroupHandler.attributes.add("IsWaterNeeded",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("IsSunNeeded",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("IsDonar",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("IsTreeDead",{type:"boolean",default:!1}),TreeGroupHandler.attributes.add("DonarTreeGroupIndex",{type:"number",default:0}),TreeGroupHandler.attributes.add("StageHandler",{type:"entity"}),TreeGroupHandler.attributes.add("WaterWarning",{type:"entity"}),TreeGroupHandler.attributes.add("SunWarning",{type:"entity"}),TreeGroupHandler.attributes.add("NormalState",{type:"entity"}),TreeGroupHandler.prototype.initialize=function(){this.StageHandlerScript=this.StageHandler.script.groupStageHandler},TreeGroupHandler.prototype.update=function(e){if(!this.IsTreeDead&&!globalVariables.IsGamePause&&this.IsHealthBarActivated){var a=this.HealthBar.getLocalScale();if(this.IsEnergySourced)a.x<=this.BarPositionMax?(a.x+=e*this.EnergyBarRatio,this.HealthBar.setLocalScale(a)):(this.DisablePipeLine(),this.IsEnergySourced=!1),a.x<.4&&a.x>=0?5!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.DisableHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage5()):a.x<.6&&a.x>=.4?6!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.DisableHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage6()):a.x<.8&&a.x>=.6?1!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.ShowNormalHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage1()):a.x<1&&a.x>=.8&&1!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.ShowNormalHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage1());else{if(a.x>=this.BarPositionMin)a.x-=e*this.EnergyBarRatio,this.HealthBar.setLocalScale(a);else if(!this.IsTreeDead)return this.IsTreeDead=!0,void this.TreeGroupDeaded();a.x<.4&&a.x>=0?5!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.DisableHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage5(),globalVariables.GameManager.script.gameManager.RemoveStar(1),a.x<.1&&a.x):a.x<.6&&a.x>=.4?4!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.DisableHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage4()):a.x<.8&&a.x>=.6?3!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.DisableHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage3()):a.x<.9&&a.x>=.8&&2!=this.StageHandlerScript.StageIndex&&(globalVariables.GameManager.script.gameManager.ShowNormalHighlight(this.TreeGroupIndex),this.StageHandlerScript.ShowStage2())}}},TreeGroupHandler.prototype.TreeGroupDeaded=function(){console.log("dead"),this.HealthBarEntity.enabled=!1,this.WaterWarning.enabled=!1,this.NormalState.enabled=!1,this.SunWarning.enabled=!1,this.StageHandlerScript.ShowDeadStage(),this.entity.collision.enabled=!1,this.IsSunNeeded&&globalVariables.GameManager.script.gameManager.HideCloud(this.TreeGroupIndex),globalVariables.GameManager.script.gameManager.DisableHighlight(this.TreeGroupIndex),globalVariables.GameManager.script.gameManager.ShowNextPosibleTreeGroup()},TreeGroupHandler.prototype.ShowWaterHealth=function(){this.IsEnergySourced||this.IsDonar||this.IsTreeDead||this.IsHealthBarActivated?console.log("Somthing went wrong"):(this.WaterWarning.enabled=!0,this.NormalState.enabled=!1,this.SunWarning.enabled=!1,this.IsWaterNeeded=!0,this.IsSunNeeded=!1,this.WaterIconEntity.enabled=!0,this.SunIconEntity.enabled=!1,this.HealthBarEntity.enabled=!0,this.IsHealthBarActivated=!0)},TreeGroupHandler.prototype.ShowSunHealth=function(){this.IsEnergySourced||this.IsDonar||this.IsTreeDead||this.IsHealthBarActivated?console.log("Somthing went wrong"):(this.SunWarning.enabled=!0,this.NormalState.enabled=!1,this.IsSunSourced=!1,globalVariables.GameManager.script.gameManager.ShowCloud(this.TreeGroupIndex),this.IsWaterNeeded=!1,this.IsSunNeeded=!0,this.WaterIconEntity.enabled=!1,this.SunIconEntity.enabled=!0,this.HealthBarEntity.enabled=!0,this.IsHealthBarActivated=!0)},TreeGroupHandler.prototype.PipeLineConnected=function(){globalVariables.GameManager.script.gameManager.ConnectedTrees+=1,this.IsEnergySourced=!0,globalVariables.GameManager.script.gameManager.AddStar(2),globalVariables.SoundManager.script.soundManager.PlayLaserTrigger();var e=Math.floor(2*Math.random()),a=globalVariables.GameManager.script.gameManager;if(0===e)a.ShowNextPosibleTreeGroup();else if(a.ShowNextPosibleTreeGroup(),a.ConnectedTrees<3){var t=pc.math.random(.1,1);setTimeout((()=>{a.ShowNextPosibleTreeGroup()}),1e3*t)}},TreeGroupHandler.prototype.DisablePipeLine=function(){this.IsSunNeeded&&globalVariables.GameManager.script.gameManager.HideCloud(this.TreeGroupIndex),globalVariables.GameManager.script.gameManager.ConnectedTrees-=1,console.log("disable"),globalVariables.TreeGroups[this.DonarTreeGroupIndex-1].script.treeGroupHandler.IsDonar=!1,this.HealthBarEntity.enabled=!1,this.IsHealthBarActivated=!1,this.IsEnergySourced=!1,this.IsPipeConnected=!1,this.PipeLineEntity.destroy(),this.IsWaterNeeded=!1,this.IsSunNeeded=!1,this.IsSunSourced=!0,this.WaterWarning.enabled=!1,this.SunWarning.enabled=!1,this.NormalState.enabled=!0};var GameManager=pc.createScript("gameManager");GameManager.attributes.add("UiManager",{type:"entity"}),GameManager.attributes.add("GameDurationInSec",{type:"number"}),GameManager.attributes.add("StarCount",{type:"number",default:0}),GameManager.attributes.add("IsGameStart",{type:"boolean",default:!1}),GameManager.attributes.add("TreeGroupHandler1",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler2",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler3",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler4",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler5",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler6",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler7",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler8",{type:"entity"}),GameManager.attributes.add("TreeGroupHandler9",{type:"entity"}),GameManager.attributes.add("LevelStageIndex",{type:"number",default:1}),GameManager.attributes.add("LevelSetIndex",{type:"number",default:1}),GameManager.attributes.add("TreeClouds",{type:"entity",array:!0}),GameManager.attributes.add("TreeGroupHandlers",{type:"entity",array:!0}),GameManager.attributes.add("TreeHighlights",{type:"entity",array:!0}),GameManager.attributes.add("ConnectedTrees",{type:"number",default:1}),GameManager.prototype.initialize=function(){this.UiManager.script.uimanager.UpdateTimer(this.GameDurationInSec),this.StartEndTimer=!1,this.TotalTime=0},GameManager.prototype.StartGame=function(){if(globalVariables.IsGamePause=!1,this.IsGameStart=!0,0===Math.floor(2*Math.random()))this.ShowNextPosibleTreeGroup();else if(this.ShowNextPosibleTreeGroup(),this.ConnectedTrees<3){var e=pc.math.random(.1,1);setTimeout((()=>{this.ShowNextPosibleTreeGroup()}),1e3*e)}},GameManager.prototype.update=function(e){this.StartEndTimer&&(this.TotalTime-=60*e,this.UiManager.script.uimanager.UpdateTimer(this.TotalTime),this.TotalTime<0&&(this.UiManager.script.uimanager.UpdateTimer(0),this.StartEndTimer=!1)),globalVariables.IsGamePause||this.IsGameStart&&(this.UiManager.script.uimanager.UpdateTimer(this.GameDurationInSec),this.GameDurationInSec-=e,this.GameDurationInSec<0&&(this.GameEnd(),this.IsGameStart=!1))},GameManager.prototype.ShowAvailableWaterGroups=function(){if(!globalVariables.IsGamePause)for(var e=0;e<this.TreeGroupHandlers.length;e++){var r=this.TreeGroupHandlers[e].script.treeGroupHandler;r.IsDonar||r.IsTreeDead||r.IsEnergySourced||r.IsHealthBarActivated||!r.IsWaterSourced||this.TreeHighlights[e].script.treeHighlightHandler.ShowHighlight()}},GameManager.prototype.ShowAvailableSunGroups=function(){if(!globalVariables.IsGamePause)for(var e=0;e<this.TreeGroupHandlers.length;e++){var r=this.TreeGroupHandlers[e].script.treeGroupHandler;r.IsDonar||r.IsTreeDead||r.IsEnergySourced||r.IsHealthBarActivated||!r.IsSunSourced||this.TreeHighlights[e].script.treeHighlightHandler.ShowHighlight()}},GameManager.prototype.ShowNextPosibleTreeGroup=function(){if(!globalVariables.IsGamePause){for(var e=!1,r=Math.floor(2*Math.random()),t=[...this.TreeGroupHandlers],a=0;a<t.length;a++){var i=Math.floor(Math.random()*t.length),n=t[i];t[i]=t[a],t[a]=n}if(0===r)for(var l=0;l<t.length;l++){var s=t[l].script.treeGroupHandler;if(!(s.IsDonar||s.IsTreeDead||s.IsEnergySourced||s.IsHealthBarActivated||s.IsWaterSourced))return e=!0,void s.ShowWaterHealth()}else if(1===r)for(var o=0;o<t.length;o++){var h=t[o].script.treeGroupHandler;if(!(h.IsDonar||h.IsTreeDead||h.IsEnergySourced||h.IsHealthBarActivated))return e=!0,void h.ShowSunHealth()}if(!e)if(1===r)for(var d=0;d<t.length;d++){var u=t[d].script.treeGroupHandler;if(!(u.IsDonar||u.IsTreeDead||u.IsEnergySourced||u.IsHealthBarActivated||u.IsWaterSourced))return e=!0,void u.ShowWaterHealth()}else if(0===r)for(var p=0;p<t.length;p++){var H=t[p].script.treeGroupHandler;if(!(H.IsDonar||H.IsTreeDead||H.IsEnergySourced||H.IsHealthBarActivated))return e=!0,void H.ShowSunHealth()}e||console.log("no possibilities")}},GameManager.prototype.ResetAvailableGroups=function(){if(!globalVariables.IsGamePause)for(var e=0;e<this.TreeHighlights.length;e++){var r=this.TreeGroupHandlers[e].script.treeGroupHandler;r.IsEnergySourced||r.IsTreeDead||r.IsHealthBarActivated||this.TreeHighlights[e].script.treeHighlightHandler.ShowNormal()}},GameManager.prototype.DisableHighlight=function(e){this.TreeHighlights[e-1].script.treeHighlightHandler.Disable()},GameManager.prototype.ShowNormalHighlight=function(e){this.TreeHighlights[e-1].script.treeHighlightHandler.ShowNormal()},GameManager.prototype.CheckLevelProgression=function(){console.log(this.LevelStageIndex,this.LevelSetIndex),1===this.LevelStageIndex?1===this.LevelSetIndex?(this.LevelSetIndex=2,this.TreeGroupHandler6.script.treeGroupHandler.ShowWaterHealth()):2===this.LevelSetIndex?(this.LevelSetIndex=3,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth()):3===this.LevelSetIndex&&(this.LevelSetIndex=4,this.LevelStageIndex=2,this.TreeGroupHandler5.script.treeGroupHandler.ShowWaterHealth()):2===this.LevelStageIndex?4===this.LevelSetIndex?(this.LevelSetIndex=1,this.TreeGroupHandler1.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler2.script.treeGroupHandler.ShowSunHealth()):1===this.LevelSetIndex?(this.LevelSetIndex=2,this.TreeGroupHandler3.script.treeGroupHandler.ShowWaterHealth()):2===this.LevelSetIndex?(this.LevelSetIndex=3,this.TreeGroupHandler6.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler9.script.treeGroupHandler.ShowSunHealth()):3===this.LevelSetIndex&&(this.LevelSetIndex=1,this.LevelStageIndex=3,this.TreeGroupHandler5.script.treeGroupHandler.ShowWaterHealth()):3===this.LevelStageIndex?1===this.LevelSetIndex?(this.LevelSetIndex=2,this.TreeGroupHandler1.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler2.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler3.script.treeGroupHandler.ShowSunHealth()):2===this.LevelSetIndex?(this.LevelSetIndex=3,this.TreeGroupHandler5.script.treeGroupHandler.ShowSunHealth()):3===this.LevelSetIndex?(this.LevelSetIndex=4,this.TreeGroupHandler9.script.treeGroupHandler.ShowSunHealth()):4===this.LevelSetIndex?(this.LevelSetIndex=5,this.TreeGroupHandler5.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler6.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler9.script.treeGroupHandler.ShowSunHealth()):5===this.LevelSetIndex?(this.LevelSetIndex=6,this.TreeGroupHandler2.script.treeGroupHandler.ShowSunHealth()):6===this.LevelSetIndex&&(this.LevelStageIndex=4,this.LevelSetIndex=1,this.TreeGroupHandler3.script.treeGroupHandler.ShowSunHealth()):4===this.LevelStageIndex?1===this.LevelSetIndex?(this.LevelSetIndex=2,this.TreeGroupHandler1.script.treeGroupHandler.ShowWaterHealth(),this.TreeGroupHandler2.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler3.script.treeGroupHandler.ShowSunHealth()):2===this.LevelSetIndex?(this.LevelSetIndex=3,this.TreeGroupHandler5.script.treeGroupHandler.ShowWaterHealth()):3===this.LevelSetIndex?(this.LevelSetIndex=4,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth()):4===this.LevelSetIndex?(this.LevelSetIndex=5,this.TreeGroupHandler5.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler6.script.treeGroupHandler.ShowSunHealth()):5===this.LevelSetIndex?(this.LevelSetIndex=6,this.TreeGroupHandler1.script.treeGroupHandler.ShowWaterHealth()):6===this.LevelSetIndex?(this.LevelSetIndex=7,this.TreeGroupHandler1.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler3.script.treeGroupHandler.ShowWaterHealth(),this.TreeGroupHandler9.script.treeGroupHandler.ShowSunHealth()):7===this.LevelSetIndex?(this.LevelSetIndex=8,this.TreeGroupHandler5.script.treeGroupHandler.ShowWaterHealth()):8===this.LevelSetIndex?(this.LevelSetIndex=9,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth()):9===this.LevelSetIndex&&(this.LevelSetIndex=1,this.LevelStageIndex=5,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth(),this.TreeGroupHandler5.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler6.script.treeGroupHandler.ShowSunHealth()):5===this.LevelStageIndex?1===this.LevelSetIndex?(this.LevelSetIndex=2,this.TreeGroupHandler3.script.treeGroupHandler.ShowWaterHealth()):2===this.LevelSetIndex?(this.LevelSetIndex=3,this.TreeGroupHandler9.script.treeGroupHandler.ShowWaterHealth()):3===this.LevelSetIndex?(this.LevelSetIndex=4,this.TreeGroupHandler1.script.treeGroupHandler.ShowWaterHealth(),this.TreeGroupHandler3.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler7.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler9.script.treeGroupHandler.ShowSunHealth()):4===this.LevelSetIndex?(this.LevelSetIndex=5,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth()):5===this.LevelSetIndex?(this.LevelSetIndex=6,this.TreeGroupHandler6.script.treeGroupHandler.ShowWaterHealth()):6===this.LevelSetIndex&&(this.LevelSetIndex=1,this.LevelStageIndex=6,this.TreeGroupHandler5.script.treeGroupHandler.ShowSunHealth()):6===this.LevelStageIndex&&(1===this.LevelSetIndex?(this.LevelSetIndex=2,this.TreeGroupHandler1.script.treeGroupHandler.ShowWaterHealth(),this.TreeGroupHandler2.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler3.script.treeGroupHandler.ShowSunHealth()):2===this.LevelSetIndex?(this.LevelSetIndex=3,this.TreeGroupHandler5.script.treeGroupHandler.ShowWaterHealth()):3===this.LevelSetIndex?(this.LevelSetIndex=4,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth()):4===this.LevelSetIndex?(this.LevelSetIndex=5,this.TreeGroupHandler5.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler6.script.treeGroupHandler.ShowSunHealth()):5===this.LevelSetIndex?(this.LevelSetIndex=6,this.TreeGroupHandler1.script.treeGroupHandler.ShowWaterHealth()):6===this.LevelSetIndex?(this.LevelSetIndex=7,this.TreeGroupHandler1.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler3.script.treeGroupHandler.ShowWaterHealth(),this.TreeGroupHandler9.script.treeGroupHandler.ShowSunHealth()):7===this.LevelSetIndex?(this.LevelSetIndex=8,this.TreeGroupHandler5.script.treeGroupHandler.ShowWaterHealth()):8===this.LevelSetIndex?(this.LevelSetIndex=9,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth()):9===this.LevelSetIndex&&(this.LevelSetIndex=1,this.LevelStageIndex=5,this.TreeGroupHandler2.script.treeGroupHandler.ShowWaterHealth(),this.TreeGroupHandler5.script.treeGroupHandler.ShowSunHealth(),this.TreeGroupHandler6.script.treeGroupHandler.ShowSunHealth()))},GameManager.prototype.ShowCloud=function(e){this.TreeClouds[e-1].script.cloudHandler.ShowCloud()},GameManager.prototype.HideCloud=function(e){this.TreeClouds[e-1].script.cloudHandler.HideCloud()},GameManager.prototype.ResetClouds=function(){this.TreeClouds[0].script.cloudHandler.HideCloud(),this.TreeClouds[1].script.cloudHandler.HideCloud(),this.TreeClouds[2].script.cloudHandler.HideCloud(),this.TreeClouds[3].script.cloudHandler.HideCloud(),this.TreeClouds[4].script.cloudHandler.HideCloud(),this.TreeClouds[5].script.cloudHandler.HideCloud(),this.TreeClouds[6].script.cloudHandler.HideCloud(),this.TreeClouds[7].script.cloudHandler.HideCloud(),this.TreeClouds[8].script.cloudHandler.HideCloud()},GameManager.prototype.AddStar=function(e){globalVariables.IsGamePause||(globalVariables.SoundManager.script.soundManager.PlayTreeGainsHealth(),this.StarCount+=e,this.UiManager.script.uimanager.PlayStarCollectAnimation(),this.UiManager.script.uimanager.UpdateScore(this.StarCount))},GameManager.prototype.RemoveStar=function(e){globalVariables.IsGamePause||(this.StarCount-=e,this.StarCount<0&&(this.StarCount=0),globalVariables.SoundManager.script.soundManager.PlayTreeLostHealth(),this.UiManager.script.uimanager.PlayStarLoseAnimation(),this.UiManager.script.uimanager.UpdateScore(this.StarCount))},GameManager.prototype.TimeOut=function(){globalVariables.IsGamePause=!0,globalVariables.IsControllBlocked=!0,console.log(this.StarCount),this.UiManager.script.uimanager.ShowTimeOut(this.StarCount)},GameManager.prototype.GameEnd=function(){globalVariables.IsGamePause=!0,globalVariables.IsControllBlocked=!0,this.UiManager.script.uimanager.ShowGameEnd(this.StarCount)};var Uimanager=pc.createScript("uimanager");function setCookie(t,n,e){var i=new Date;i.setDate(i.getDate()+e);var a=escape(n)+(null==e?"":"; expires="+i.toUTCString());document.cookie=t+"="+a+"; path=/"}Uimanager.attributes.add("TimerTxt",{type:"entity"}),Uimanager.attributes.add("ScoreTxt",{type:"entity"}),Uimanager.attributes.add("StarCollectAnim",{type:"entity"}),Uimanager.attributes.add("StarLoseAnim",{type:"entity"}),Uimanager.attributes.add("PauseBtnEntity",{type:"entity"}),Uimanager.attributes.add("PauseMenuEntity",{type:"entity"}),Uimanager.attributes.add("ResumeBtnEntity",{type:"entity"}),Uimanager.attributes.add("RestartBtnEntity",{type:"entity"}),Uimanager.attributes.add("SoundMuteBtn",{type:"entity"}),Uimanager.attributes.add("SoundUnMuteBtn",{type:"entity"}),Uimanager.attributes.add("ExitBtn",{type:"entity"}),Uimanager.attributes.add("GameEndEntity",{type:"entity"}),Uimanager.attributes.add("GameEndRemainingTimeTxt",{type:"entity"}),Uimanager.attributes.add("GameEndStarCountTxt",{type:"entity"}),Uimanager.attributes.add("GameEndRestartEntity",{type:"entity"}),Uimanager.attributes.add("GameEndContinueBtnEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutStarCountTxt",{type:"entity"}),Uimanager.attributes.add("TimeOutRestartEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutContinueBtnEntity",{type:"entity"}),Uimanager.prototype.initialize=function(){this.PauseBtnEntity.button.on("mousedown",this.OnClickPlause,this),this.ResumeBtnEntity.button.on("mousedown",this.OnClickResume,this),this.RestartBtnEntity.button.on("mousedown",this.OnClickRestart,this),this.SoundMuteBtn.button.on("mousedown",this.OnClickMute,this),this.SoundUnMuteBtn.button.on("mousedown",this.OnClickUnMute,this),this.ExitBtn.button.on("mousedown",this.OnClickContinue,this),this.GameEndRestartEntity.button.on("mousedown",this.OnClickRestart,this),this.GameEndContinueBtnEntity.button.on("mousedown",this.OnClickContinue,this),this.TimeOutRestartEntity.button.on("mousedown",this.OnClickRestart,this),this.TimeOutContinueBtnEntity.button.on("mousedown",this.OnClickContinue,this),this.PauseBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickPlause,this),this.ResumeBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickResume,this),this.RestartBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.SoundMuteBtn.button.on(pc.EVENT_TOUCHEND,this.OnClickMute,this),this.SoundUnMuteBtn.button.on(pc.EVENT_TOUCHEND,this.OnClickUnMute,this),this.ExitBtn.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.GameEndRestartEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.GameEndContinueBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.TimeOutRestartEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.TimeOutContinueBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.StartCoinAnim=!1,this.CoinsCount=0,this.CoinAnimCount=0},Uimanager.prototype.update=function(t){this.StartCoinAnim&&(this.CoinAnimCount+=60*t,this.GameEndStarCountTxt.element.text=Math.round(this.CoinAnimCount),this.CoinsCount<this.CoinAnimCount&&(this.GameEndStarCountTxt.element.text=Math.round(this.CoinAnimCount),this.StartCoinAnim=!1))},Uimanager.prototype.UpdateTimer=function(t){Math.floor(t/3600);var n=Math.floor(t%3600/60),e=Math.round(t%60);this.TimerTxt.element.text=e>9?"0"+n+":"+e:"0"+n+":0"+e},Uimanager.prototype.UpdateScore=function(t){this.ScoreTxt.element.text=t},Uimanager.prototype.PlayStarCollectAnimation=function(){this.StarCollectAnim.enabled=!0,setTimeout((()=>{this.StarCollectAnim.enabled=!1}),800)},Uimanager.prototype.PlayStarLoseAnimation=function(){this.StarLoseAnim.enabled=!0,setTimeout((()=>{this.StarLoseAnim.enabled=!1}),800)},Uimanager.prototype.OnClickPlause=function(){globalVariables.IsGamePause||(globalVariables.IsGamePause=!0,this.PauseMenuEntity.enabled=!0,this.app.timeScale=0)},Uimanager.prototype.OnClickResume=function(){this.app.timeScale=1,globalVariables.IsGamePause=!1,this.PauseMenuEntity.enabled=!1},Uimanager.prototype.OnClickMute=function(){this.app.systems.sound.volume=0,this.IsMuted=!1,this.SoundUnMuteBtn.enabled=!0,this.SoundMuteBtn.enabled=!1},Uimanager.prototype.OnClickUnMute=function(){this.app.systems.sound.volume=1,this.IsMuted=!0,this.SoundUnMuteBtn.enabled=!1,this.SoundMuteBtn.enabled=!0},Uimanager.prototype.ShowTimeOut=function(t){this.TimeOutStarCountTxt.element.text=t,this.TimeOutEntity.enabled=!0},Uimanager.prototype.ShowGameEnd=function(t){this.GameEndStarCountTxt.element.text=t,this.GameEndEntity.enabled=!0},Uimanager.prototype.OnClickContinue=function(t){setCookie("SustainabilityProgress",2,1),window.location.replace("../main.html")},Uimanager.prototype.OnClickRestart=function(){this.app.timeScale=1,window.location.reload()};var SoundManager=pc.createScript("soundManager");SoundManager.attributes.add("Common",{type:"entity"}),SoundManager.prototype.PlayCloudAppear=function(){this.Common.sound.play("CloudAppearence")},SoundManager.prototype.PlayLaserConnected=function(){this.Common.sound.play("LaserConnected")},SoundManager.prototype.PlayLaserGrabbed=function(){this.Common.sound.play("LaserGrabbed")},SoundManager.prototype.PlayLaserError=function(){this.Common.sound.play("LaserError")},SoundManager.prototype.PlayGoodLaserConnection=function(){this.Common.sound.play("LaserGoodConnection")},SoundManager.prototype.PlayLaserTrigger=function(){this.Common.sound.play("LaserTrigger")},SoundManager.prototype.PlayTreeGainsHealth=function(){this.Common.sound.play("TreeGainsHealth")},SoundManager.prototype.PlayTreeLostHealth=function(){this.Common.sound.play("TreeLosesHealth")};var GlobalVariables=pc.createScript("globalVariables");GlobalVariables.attributes.add("IsGamePause",{type:"boolean",default:!1}),GlobalVariables.attributes.add("IsControllBlocked",{type:"boolean",default:!1}),GlobalVariables.attributes.add("GameManager",{type:"entity"}),GlobalVariables.attributes.add("SoundManager",{type:"entity"}),GlobalVariables.attributes.add("UIManager",{type:"entity"}),GlobalVariables.attributes.add("TreeGroups",{type:"entity",array:!0}),GlobalVariables.prototype.initialize=function(){window.globalVariables=this};var AnimateSprite=pc.createScript("animateSprite");AnimateSprite.attributes.add("startFrame",{type:"number",default:0,description:"Frame to start animation from"}),AnimateSprite.attributes.add("numFrames",{type:"number",default:1,description:"Number of frames to play before looping"}),AnimateSprite.attributes.add("frameRate",{type:"number",default:1,description:"Playback frames per second"}),AnimateSprite.prototype.initialize=function(){this.timer=1/this.frameRate,this.frame=this.startFrame},AnimateSprite.prototype.update=function(t){this.timer-=t,this.timer<0&&(this.frame++,this.frame>=this.numFrames+this.startFrame&&(this.frame=this.startFrame),this.entity.element.spriteFrame=this.frame,this.timer=1/this.frameRate)};var CloudHandler=pc.createScript("cloudHandler");CloudHandler.attributes.add("StartPoint",{type:"vec3"}),CloudHandler.attributes.add("EndPoint",{type:"vec3"}),CloudHandler.prototype.initialize=function(){this.StartPoint=this.entity.getLocalPosition()},CloudHandler.prototype.ShowCloud=function(){this.entity.tween(this.entity.getLocalPosition()).to({x:this.EndPoint.x,y:this.EndPoint.y,z:this.EndPoint.z},.5,pc.Linear).start()},CloudHandler.prototype.HideCloud=function(){this.entity.tween(this.entity.getLocalPosition()).to({x:this.StartPoint.x,y:this.StartPoint.y,z:this.StartPoint.z},.5,pc.Linear).start()};var GroupStageHandler=pc.createScript("groupStageHandler");TreeGroupHandler.attributes.add("StageIndex",{type:"number"}),GroupStageHandler.attributes.add("Stages",{type:"entity",array:!0}),GroupStageHandler.attributes.add("Stage1SUB",{type:"entity"}),GroupStageHandler.prototype.initialize=function(){},GroupStageHandler.prototype.ShowDeadStage=function(){for(var a=0;a<this.Stages.length;a++)this.Stages[a].enabled=!1},GroupStageHandler.prototype.ShowStage2=function(){this.StageIndex=2;var a={alpha:1},t=this.Stages[0].model.meshInstances;this.app.tween(a).to({alpha:0},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start();var e=this.Stage1SUB.model.meshInstances;this.app.tween(a).to({alpha:0},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var t=0;t<e.length;++t)e[t].setParameter("material_opacity",a.alpha)})).start(),setTimeout((()=>{this.Stages[0].enabled=!1,this.Stage1SUB.enabled=!1}),500),setTimeout((()=>{for(var a={alpha:0},t=this.Stages[1].model.meshInstances,e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha);this.Stages[1].enabled=!0,this.app.tween(a).to({alpha:1},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start()}),10)},GroupStageHandler.prototype.ShowStage3=function(){this.StageIndex=3;var a={alpha:1},t=this.Stages[1].model.meshInstances;this.app.tween(a).to({alpha:0},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start(),setTimeout((()=>{this.Stages[1].enabled=!1}),500),setTimeout((()=>{for(var a={alpha:0},t=this.Stages[2].model.meshInstances,e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha);this.Stages[2].enabled=!0,this.app.tween(a).to({alpha:1},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start()}),10)},GroupStageHandler.prototype.ShowStage4=function(){this.StageIndex=4;var a={alpha:1},t=this.Stages[2].model.meshInstances;this.app.tween(a).to({alpha:0},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start(),setTimeout((()=>{this.Stages[2].enabled=!1}),500),setTimeout((()=>{for(var a={alpha:0},t=this.Stages[3].model.meshInstances,e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha);this.Stages[3].enabled=!0,this.app.tween(a).to({alpha:1},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start()}),10)},GroupStageHandler.prototype.ShowStage5=function(){this.StageIndex=5;var a={alpha:1},t=this.Stages[3].model.meshInstances;this.app.tween(a).to({alpha:0},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start(),setTimeout((()=>{this.Stages[3].enabled=!1}),500),setTimeout((()=>{for(var a={alpha:0},t=this.Stages[4].model.meshInstances,e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha);this.Stages[4].enabled=!0,this.app.tween(a).to({alpha:1},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start()}),10)},GroupStageHandler.prototype.ShowStage6=function(){this.StageIndex=6;var a={alpha:1},t=this.Stages[4].model.meshInstances;this.app.tween(a).to({alpha:0},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start(),setTimeout((()=>{this.Stages[4].enabled=!1}),500),setTimeout((()=>{for(var a={alpha:0},t=this.Stages[5].model.meshInstances,e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha);this.Stages[5].enabled=!0,this.app.tween(a).to({alpha:1},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start()}),10)},GroupStageHandler.prototype.ShowStage1=function(){this.StageIndex=1;var a={alpha:1},t=this.Stages[5].model.meshInstances;this.app.tween(a).to({alpha:0},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start(),setTimeout((()=>{this.Stages[5].enabled=!1}),500),setTimeout((()=>{for(var a={alpha:0},t=this.Stages[0].model.meshInstances,e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha);this.Stages[0].enabled=!0,this.app.tween(a).to({alpha:1},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<t.length;++e)t[e].setParameter("material_opacity",a.alpha)})).start();for(var o=this.Stage1SUB.model.meshInstances,r=0;r<o.length;++r)o[r].setParameter("material_opacity",a.alpha);this.Stage1SUB.enabled=!0,this.app.tween(a).to({alpha:1},.5,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var t=0;t<o.length;++t)o[t].setParameter("material_opacity",a.alpha)})).start()}),10)};var Test=pc.createScript("test");Test.prototype.initialize=function(){var t={alpha:1},a=this.entity.model.meshInstances;this.app.tween(t).to({alpha:0},2,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){for(var e=0;e<a.length;++e)a[e].setParameter("material_opacity",t.alpha)})).start()},Test.prototype.TrySprite=function(){var t={alpha:0},a=this.entity.sprite;this.app.tween(t).to({alpha:1},2,pc.Linear).loop(!1).yoyo(!1).on("update",(function(){a.opacity=t.alpha})).start()};var FadingObject=pc.createScript("fadingObject");FadingObject.attributes.add("duration",{type:"number",default:2,title:"Duration (Secs)"}),FadingObject.prototype.initialize=function(){this.time=0},FadingObject.prototype.update=function(t){this.time+=t,this.time>this.duration&&(this.time-=this.duration);for(var i=this.time/this.duration,e=Math.abs(2*(i-.5)),a=this.entity.model.meshInstances,n=0;n<a.length;++n)a[n].setParameter("material_opacity",e)};var Camera=pc.createScript("camera");Camera.attributes.add("maxElevation",{type:"number",title:"Max Elevation",default:70}),Camera.prototype.initialize=function(){this.viewPos=new pc.Vec3,this.targetViewPos=new pc.Vec3,this.tempVec=new pc.Vec3,this.distance=3,this.targetDistance=3,this.rotX=-180,this.rotY=0,this.targetRotX=-40,this.targetRotY=30,this.quatX=new pc.Quat,this.quatY=new pc.Quat,this.transformStarted=!1,this.app.mouse.disableContextMenu(),this.setBestCameraPositionForModel();var t,e,a;this.hammer=Hammer(this.app.graphicsDevice.canvas,{prevent_default:!0,drag_max_touches:2,transform_min_scale:.08,transform_min_rotation:180,transform_always_block:!0,hold:!1,release:!1,swipe:!1,tap:!1}),this.hammer.on("transformstart",function(e){this.transformStarted=!0,t=this.targetDistance,e.preventDefault(),this.hammer.options.drag=!1}.bind(this)),this.hammer.on("transformend",function(t){this.transformStarted=!1,this.hammer.options.drag=!0}.bind(this)),this.hammer.on("transform",function(e){if(this.transformStarted){var a=e.gesture.scale;this.targetDistance=t/a}}.bind(this)),this.hammer.on("dragstart",function(t){if(!this.transformStarted){var s=t.gesture,i=void 0!==s.touches?s.touches.length:1;this.panning=2===i,this.dragStarted=!0,e=s.center.pageX,a=s.center.pageY}}.bind(this)),this.hammer.on("dragend",function(t){this.dragStarted&&(this.dragStarted=!1,this.panning=!1)}.bind(this)),this.hammer.on("drag",function(t){var s=t.gesture,i=s.center.pageX-e,r=s.center.pageY-a;this.panning?this.pan(-.025*i,.025*r):this.orbit(.5*i,.5*r),e=s.center.pageX,a=s.center.pageY}.bind(this)),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this)},Camera.prototype.setBestCameraPositionForModel=function(){var t,e,a=this.app.scene.getModels(),isUnderCamera=function(t){for(var e=t.node.getParent();e;){if(e.camera)return!0;e=e.getParent()}return!1},s=[];for(t=0;t<a.length;t++){var i=a[t].meshInstances;for(e=0;e<i.length;e++)isUnderCamera(i[e])||s.push(i[e])}if(s.length>0){var r=new pc.shape.Aabb;for(r.copy(s[0].aabb),t=0;t<s.length;t++)r.add(s[t].aabb);var n=r.center,o=r.halfExtents.y,h=r.halfExtents.z,c=1.5*o/Math.tan(.5*this.entity.camera.fov*Math.PI/180);this.reset(n,c+h)}else this.reset(pc.Vec3.ZERO,3)},Camera.prototype.reset=function(t,e){this.viewPos.copy(t),this.targetViewPos.copy(t),this.distance=e,this.targetDistance=e,this.rotX=-180,this.rotY=0,this.targetRotX=-40,this.targetRotY=30},Camera.prototype.pan=function(t,e){this.tempVec.copy(this.entity.right).scale(t),this.targetViewPos.add(this.tempVec),this.tempVec.copy(this.entity.up).scale(e),this.targetViewPos.add(this.tempVec)},Camera.prototype.dolly=function(t){this.targetDistance+=t,this.targetDistance<0&&(this.targetDistance=0)},Camera.prototype.orbit=function(t,e){this.targetRotX+=t,this.targetRotY+=e,this.targetRotY=pc.math.clamp(this.targetRotY,-this.maxElevation,this.maxElevation)},Camera.prototype.onMouseWheel=function(t){t.event.preventDefault(),this.dolly(-.25*t.wheel)},Camera.prototype.onMouseMove=function(t){if(t.buttons[pc.MOUSEBUTTON_LEFT])this.orbit(.2*t.dx,.2*t.dy);else if(t.buttons[pc.MOUSEBUTTON_RIGHT]){var e=this.distance/700;this.pan(t.dx*-e,t.dy*e)}},Camera.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_SPACE)&&this.setBestCameraPositionForModel(),this.viewPos.lerp(this.viewPos,this.targetViewPos,t/.1),this.distance=pc.math.lerp(this.distance,this.targetDistance,t/.2),this.rotX=pc.math.lerp(this.rotX,this.targetRotX,t/.2),this.rotY=pc.math.lerp(this.rotY,this.targetRotY,t/.2),this.quatX.setFromAxisAngle(pc.Vec3.RIGHT,-this.rotY),this.quatY.setFromAxisAngle(pc.Vec3.UP,-this.rotX),this.quatY.mul(this.quatX),this.entity.setPosition(this.viewPos),this.entity.setRotation(this.quatY),this.entity.translateLocal(0,0,this.distance)};// hammer.min.js
/*! Hammer.JS - v1.1.3 - 2014-05-20
 * http://eightmedia.github.io/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */


!function(a,b){"use strict";function c(){d.READY||(s.determineEventTypes(),r.each(d.gestures,function(a){u.register(a)}),s.onTouch(d.DOCUMENT,n,u.detect),s.onTouch(d.DOCUMENT,o,u.detect),d.READY=!0)}var d=function v(a,b){return new v.Instance(a,b||{})};d.VERSION="1.1.3",d.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.DOCUMENT=document,d.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&d.IS_MOBILE||d.HAS_POINTEREVENTS,d.CALCULATE_INTERVAL=25;var e={},f=d.DIRECTION_DOWN="down",g=d.DIRECTION_LEFT="left",h=d.DIRECTION_UP="up",i=d.DIRECTION_RIGHT="right",j=d.POINTER_MOUSE="mouse",k=d.POINTER_TOUCH="touch",l=d.POINTER_PEN="pen",m=d.EVENT_START="start",n=d.EVENT_MOVE="move",o=d.EVENT_END="end",p=d.EVENT_RELEASE="release",q=d.EVENT_TOUCH="touch";d.READY=!1,d.plugins=d.plugins||{},d.gestures=d.gestures||{};var r=d.utils={extend:function(a,c,d){for(var e in c)!c.hasOwnProperty(e)||a[e]!==b&&d||(a[e]=c[e]);return a},on:function(a,b,c){a.addEventListener(b,c,!1)},off:function(a,b,c){a.removeEventListener(b,c,!1)},each:function(a,c,d){var e,f;if("forEach"in a)a.forEach(c,d);else if(a.length!==b){for(e=0,f=a.length;f>e;e++)if(c.call(d,a[e],e,a)===!1)return}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return},inStr:function(a,b){return a.indexOf(b)>-1},inArray:function(a,b){if(a.indexOf){var c=a.indexOf(b);return-1===c?!1:c}for(var d=0,e=a.length;e>d;d++)if(a[d]===b)return d;return!1},toArray:function(a){return Array.prototype.slice.call(a,0)},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){var b=[],c=[],d=[],e=[],f=Math.min,g=Math.max;return 1===a.length?{pageX:a[0].pageX,pageY:a[0].pageY,clientX:a[0].clientX,clientY:a[0].clientY}:(r.each(a,function(a){b.push(a.pageX),c.push(a.pageY),d.push(a.clientX),e.push(a.clientY)}),{pageX:(f.apply(Math,b)+g.apply(Math,b))/2,pageY:(f.apply(Math,c)+g.apply(Math,c))/2,clientX:(f.apply(Math,d)+g.apply(Math,d))/2,clientY:(f.apply(Math,e)+g.apply(Math,e))/2})},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return 180*Math.atan2(d,c)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.clientX-b.clientX),d=Math.abs(a.clientY-b.clientY);return c>=d?a.clientX-b.clientX>0?g:i:a.clientY-b.clientY>0?h:f},getDistance:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==h||a==f},setPrefixedCss:function(a,b,c,d){var e=["","Webkit","Moz","O","ms"];b=r.toCamelCase(b);for(var f=0;f<e.length;f++){var g=b;if(e[f]&&(g=e[f]+g.slice(0,1).toUpperCase()+g.slice(1)),g in a.style){a.style[g]=(null==d||d)&&c||"";break}}},toggleBehavior:function(a,b,c){if(b&&a&&a.style){r.each(b,function(b,d){r.setPrefixedCss(a,d,b,c)});var d=c&&function(){return!1};"none"==b.userSelect&&(a.onselectstart=d),"none"==b.userDrag&&(a.ondragstart=d)}},toCamelCase:function(a){return a.replace(/[_-]([a-z])/g,function(a){return a[1].toUpperCase()})}},s=d.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(a,b,c,d){var e=b.split(" ");r.each(e,function(b){r.on(a,b,c),d&&d(b)})},off:function(a,b,c,d){var e=b.split(" ");r.each(e,function(b){r.off(a,b,c),d&&d(b)})},onTouch:function(a,b,c){var f=this,g=function(e){var g,h=e.type.toLowerCase(),i=d.HAS_POINTEREVENTS,j=r.inStr(h,"mouse");j&&f.preventMouseEvents||(j&&b==m&&0===e.button?(f.preventMouseEvents=!1,f.shouldDetect=!0):i&&b==m?f.shouldDetect=1===e.buttons||t.matchType(k,e):j||b!=m||(f.preventMouseEvents=!0,f.shouldDetect=!0),i&&b!=o&&t.updatePointer(b,e),f.shouldDetect&&(g=f.doDetect.call(f,e,b,a,c)),g==o&&(f.preventMouseEvents=!1,f.shouldDetect=!1,t.reset()),i&&b==o&&t.updatePointer(b,e))};return this.on(a,e[b],g),g},doDetect:function(a,b,c,d){var e=this.getTouchList(a,b),f=e.length,g=b,h=e.trigger,i=f;b==m?h=q:b==o&&(h=p,i=e.length-(a.changedTouches?a.changedTouches.length:1)),i>0&&this.started&&(g=n),this.started=!0;var j=this.collectEventData(c,g,e,a);return b!=o&&d.call(u,j),h&&(j.changedLength=i,j.eventType=h,d.call(u,j),j.eventType=g,delete j.changedLength),g==o&&(d.call(u,j),this.started=!1),g},determineEventTypes:function(){var b;return b=d.HAS_POINTEREVENTS?a.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e[m]=b[0],e[n]=b[1],e[o]=b[2],e},getTouchList:function(a,b){if(d.HAS_POINTEREVENTS)return t.getTouchList();if(a.touches){if(b==n)return a.touches;var c=[],e=[].concat(r.toArray(a.touches),r.toArray(a.changedTouches)),f=[];return r.each(e,function(a){r.inArray(c,a.identifier)===!1&&f.push(a),c.push(a.identifier)}),f}return a.identifier=1,[a]},collectEventData:function(a,b,c,d){var e=k;return r.inStr(d.type,"mouse")||t.matchType(j,d)?e=j:t.matchType(l,d)&&(e=l),{center:r.getCenter(c),timeStamp:Date.now(),target:d.target,touches:c,eventType:b,pointerType:e,srcEvent:d,preventDefault:function(){var a=this.srcEvent;a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return u.stopDetect()}}}},t=d.PointerEvent={pointers:{},getTouchList:function(){var a=[];return r.each(this.pointers,function(b){a.push(b)}),a},updatePointer:function(a,b){a==o||a!=o&&1!==b.buttons?delete this.pointers[b.pointerId]:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b)},matchType:function(a,b){if(!b.pointerType)return!1;var c=b.pointerType,d={};return d[j]=c===(b.MSPOINTER_TYPE_MOUSE||j),d[k]=c===(b.MSPOINTER_TYPE_TOUCH||k),d[l]=c===(b.MSPOINTER_TYPE_PEN||l),d[a]},reset:function(){this.pointers={}}},u=d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:r.extend({},b),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var b=this.current.inst,c=b.options;return r.each(this.gestures,function(d){!this.stopped&&b.enabled&&c[d.name]&&d.handler.call(d,a,b)},this),this.current&&(this.current.lastEvent=a),a.eventType==o&&this.stopDetect(),a}},stopDetect:function(){this.previous=r.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(a,b,c,e,f){var g=this.current,h=!1,i=g.lastCalcEvent,j=g.lastCalcData;i&&a.timeStamp-i.timeStamp>d.CALCULATE_INTERVAL&&(b=i.center,c=a.timeStamp-i.timeStamp,e=a.center.clientX-i.center.clientX,f=a.center.clientY-i.center.clientY,h=!0),(a.eventType==q||a.eventType==p)&&(g.futureCalcEvent=a),(!g.lastCalcEvent||h)&&(j.velocity=r.getVelocity(c,e,f),j.angle=r.getAngle(b,a.center),j.direction=r.getDirection(b,a.center),g.lastCalcEvent=g.futureCalcEvent||a,g.futureCalcEvent=a),a.velocityX=j.velocity.x,a.velocityY=j.velocity.y,a.interimAngle=j.angle,a.interimDirection=j.direction},extendEventData:function(a){var b=this.current,c=b.startEvent,d=b.lastEvent||c;(a.eventType==q||a.eventType==p)&&(c.touches=[],r.each(a.touches,function(a){c.touches.push({clientX:a.clientX,clientY:a.clientY})}));var e=a.timeStamp-c.timeStamp,f=a.center.clientX-c.center.clientX,g=a.center.clientY-c.center.clientY;return this.getCalculatedData(a,d.center,e,f,g),r.extend(a,{startEvent:c,deltaTime:e,deltaX:f,deltaY:g,distance:r.getDistance(c.center,a.center),angle:r.getAngle(c.center,a.center),direction:r.getDirection(c.center,a.center),scale:r.getScale(c.touches,a.touches),rotation:r.getRotation(c.touches,a.touches)}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),r.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}};d.Instance=function(a,b){var e=this;c(),this.element=a,this.enabled=!0,r.each(b,function(a,c){delete b[c],b[r.toCamelCase(c)]=a}),this.options=r.extend(r.extend({},d.defaults),b||{}),this.options.behavior&&r.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=s.onTouch(a,m,function(a){e.enabled&&a.eventType==m?u.startDetect(e,a):a.eventType==q&&u.detect(a)}),this.eventHandlers=[]},d.Instance.prototype={on:function(a,b){var c=this;return s.on(c.element,a,b,function(a){c.eventHandlers.push({gesture:a,handler:b})}),c},off:function(a,b){var c=this;return s.off(c.element,a,b,function(a){var d=r.inArray({gesture:a,handler:b});d!==!1&&c.eventHandlers.splice(d,1)}),c},trigger:function(a,b){b||(b={});var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return r.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this},dispose:function(){var a,b;for(r.toggleBehavior(this.element,this.options.behavior,!1),a=-1;b=this.eventHandlers[++a];)r.off(this.element,b.gesture,b.handler);return this.eventHandlers=[],s.off(this.element,e[m],this.eventStartHandler),null}},function(a){function b(b,d){var e=u.current;if(!(d.options.dragMaxTouches>0&&b.touches.length>d.options.dragMaxTouches))switch(b.eventType){case m:c=!1;break;case n:if(b.distance<d.options.dragMinDistance&&e.name!=a)return;var j=e.startEvent.center;if(e.name!=a&&(e.name=a,d.options.dragDistanceCorrection&&b.distance>0)){var k=Math.abs(d.options.dragMinDistance/b.distance);j.pageX+=b.deltaX*k,j.pageY+=b.deltaY*k,j.clientX+=b.deltaX*k,j.clientY+=b.deltaY*k,b=u.extendEventData(b)}(e.lastEvent.dragLockToAxis||d.options.dragLockToAxis&&d.options.dragLockMinDistance<=b.distance)&&(b.dragLockToAxis=!0);var l=e.lastEvent.direction;b.dragLockToAxis&&l!==b.direction&&(b.direction=r.isVertical(l)?b.deltaY<0?h:f:b.deltaX<0?g:i),c||(d.trigger(a+"start",b),c=!0),d.trigger(a,b),d.trigger(a+b.direction,b);var q=r.isVertical(b.direction);(d.options.dragBlockVertical&&q||d.options.dragBlockHorizontal&&!q)&&b.preventDefault();break;case p:c&&b.changedLength<=d.options.dragMaxTouches&&(d.trigger(a+"end",b),c=!1);break;case o:c=!1}}var c=!1;d.gestures.Drag={name:a,index:50,handler:b,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),d.gestures.Gesture={name:"gesture",index:1337,handler:function(a,b){b.trigger(this.name,a)}},function(a){function b(b,d){var e=d.options,f=u.current;switch(b.eventType){case m:clearTimeout(c),f.name=a,c=setTimeout(function(){f&&f.name==a&&d.trigger(a,b)},e.holdTimeout);break;case n:b.distance>e.holdThreshold&&clearTimeout(c);break;case p:clearTimeout(c)}}var c;d.gestures.Hold={name:a,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:b}}("hold"),d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==p&&b.trigger(this.name,a)}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(a,b){if(a.eventType==p){var c=a.touches.length,d=b.options;if(c<d.swipeMinTouches||c>d.swipeMaxTouches)return;(a.velocityX>d.swipeVelocityX||a.velocityY>d.swipeVelocityY)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},function(a){function b(b,d){var e,f,g=d.options,h=u.current,i=u.previous;switch(b.eventType){case m:c=!1;break;case n:c=c||b.distance>g.tapMaxDistance;break;case o:!r.inStr(b.srcEvent.type,"cancel")&&b.deltaTime<g.tapMaxTime&&!c&&(e=i&&i.lastEvent&&b.timeStamp-i.lastEvent.timeStamp,f=!1,i&&i.name==a&&e&&e<g.doubleTapInterval&&b.distance<g.doubleTapDistance&&(d.trigger("doubletap",b),f=!0),(!f||g.tapAlways)&&(h.name=a,d.trigger(h.name,b)))}}var c=!1;d.gestures.Tap={name:a,index:100,handler:b,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),d.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(a,b){return b.options.preventMouse&&a.pointerType==j?void a.stopDetect():(b.options.preventDefault&&a.preventDefault(),void(a.eventType==q&&b.trigger("touch",a)))}},function(a){function b(b,d){switch(b.eventType){case m:c=!1;break;case n:if(b.touches.length<2)return;var e=Math.abs(1-b.scale),f=Math.abs(b.rotation);if(e<d.options.transformMinScale&&f<d.options.transformMinRotation)return;u.current.name=a,c||(d.trigger(a+"start",b),c=!0),d.trigger(a,b),f>d.options.transformMinRotation&&d.trigger("rotate",b),e>d.options.transformMinScale&&(d.trigger("pinch",b),d.trigger("pinch"+(b.scale<1?"in":"out"),b));break;case p:c&&b.changedLength<2&&(d.trigger(a+"end",b),c=!1)}}var c=!1;d.gestures.Transform={name:a,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:b}}("transform"),"function"==typeof define&&define.amd?define(function(){return d}):"undefined"!=typeof module&&module.exports?module.exports=d:a.Hammer=d}(window);
//# sourceMappingURL=hammer.min.map

var Halo=pc.createScript("halo");Halo.attributes.add("camera",{type:"entity"}),Halo.attributes.add("unidirectional",{type:"boolean",default:!1}),Halo.tmp=new pc.Vec3,Halo.prototype.initialize=function(){this.plane=this.entity.getChildren()[0],this.parent=this.entity.getParent()},Halo.prototype.update=function(t){var a=Halo.tmp;a.copy(this.parent.forward).scale(-1);var e=this.plane.model.meshInstances;if(this.camera)if(this.entity.lookAt(this.camera.getPosition()),this.unidirectional){var i=-1*a.dot(this.camera.forward);i<0&&(i=0),e[0].setParameter("material_opacity",i)}else e[0].setParameter("material_opacity",1)};var ScrollingTexture=pc.createScript("scrollingTexture");ScrollingTexture.attributes.add("materialAsset",{type:"asset"}),ScrollingTexture.attributes.add("speed",{type:"vec2"}),ScrollingTexture.tmp=new pc.Vec2,ScrollingTexture.prototype.initialize=function(){this.materialAsset&&(this.material=this.materialAsset.resource)},ScrollingTexture.prototype.update=function(e){var t=ScrollingTexture.tmp;t.set(this.speed.x,this.speed.y),t.scale(e),this.material.diffuseMapOffset=this.material.diffuseMapOffset.add(t),this.material.normalMapOffset.add(t),this.material.opacityMapOffset.add(t),this.material.emissiveMapOffset.add(t),this.material.update()};var TreeHighlightHandler=pc.createScript("treeHighlightHandler");TreeHighlightHandler.attributes.add("Normal",{type:"entity"}),TreeHighlightHandler.attributes.add("Highlight",{type:"entity"}),TreeHighlightHandler.prototype.initialize=function(){},TreeHighlightHandler.prototype.ShowHighlight=function(){this.Highlight.enabled=!0,this.Normal.enabled=!1},TreeHighlightHandler.prototype.ShowNormal=function(){this.Highlight.enabled=!1,this.Normal.enabled=!0},TreeHighlightHandler.prototype.Disable=function(){this.Highlight.enabled=!1,this.Normal.enabled=!1};var TutorialHandler=pc.createScript("tutorialHandler");TutorialHandler.attributes.add("ClickToStartBtn",{type:"entity"}),TutorialHandler.attributes.add("Msg1",{type:"entity"}),TutorialHandler.attributes.add("Msg2",{type:"entity"}),TutorialHandler.attributes.add("Msg3",{type:"entity"}),TutorialHandler.attributes.add("Msg4",{type:"entity"}),TutorialHandler.attributes.add("MobileMsg4",{type:"entity"}),TutorialHandler.attributes.add("TeraHandler",{type:"entity"}),TutorialHandler.prototype.initialize=function(){this.ClickToStartBtn.button.on("mousedown",this.OnClickToStart,this),this.ClickToStartBtn.button.on(pc.EVENT_TOUCHSTART,this.OnClickToStart,this)},TutorialHandler.prototype.OnClickToStart=function(){this.ClickToStartBtn.enabled=!1,this.TeraHandler.script.teraHandler.Show(),setTimeout((()=>{this.ShowMsg1()}),600)},TutorialHandler.prototype.ShowMsg1=function(){this.ResetMsgs(),this.Msg1.enabled=!0,setTimeout((()=>{this.ShowMsg2()}),8e3)},TutorialHandler.prototype.ShowMsg2=function(){this.ResetMsgs(),this.Msg2.enabled=!0,setTimeout((()=>{this.ShowMsg3()}),4e3)},TutorialHandler.prototype.ShowMsg3=function(){this.ResetMsgs(),this.Msg3.enabled=!0,setTimeout((()=>{this.ShowMsg4()}),7e3)},TutorialHandler.prototype.ShowMsg4=function(){this.ResetMsgs(),this.app.touch?(this.MobileMsg4.enabled=!0,setTimeout((()=>{this.ResetMsgs(),this.TeraHandler.script.teraHandler.Hide(),globalVariables.GameManager.script.gameManager.StartGame()}),4e3)):(this.Msg4.enabled=!0,setTimeout((()=>{this.ResetMsgs(),this.TeraHandler.script.teraHandler.Hide(),globalVariables.GameManager.script.gameManager.StartGame()}),4e3))},TutorialHandler.prototype.ResetMsgs=function(){this.Msg1.enabled=!1,this.Msg2.enabled=!1,this.Msg3.enabled=!1,this.Msg4.enabled=!1,this.MobileMsg4.enabled=!1};var TeraHandler=pc.createScript("teraHandler");TeraHandler.attributes.add("TargetPosition",{type:"vec3"}),TeraHandler.attributes.add("StartingPosition",{type:"vec3"}),TeraHandler.prototype.initialize=function(){this.StartingPosition=this.entity.getLocalPosition()},TeraHandler.prototype.Show=function(){this.entity.tween(this.entity.getLocalPosition()).to({x:this.TargetPosition.x,y:this.TargetPosition.y,z:this.TargetPosition.z},.5,pc.Linear).start()},TeraHandler.prototype.Hide=function(){this.entity.tween(this.entity.getLocalPosition()).to({x:this.StartingPosition.x,y:this.StartingPosition.y,z:this.StartingPosition.z},.5,pc.Linear).start(),setTimeout((()=>{this.entity.enabled=!1}),1500)};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this},from:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,n))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,n,s=0===this.duration?1:this.time/this.duration,r=this.easing(s);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],n=this._ev[h],this.target[h]=e+(n-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,n=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.Application.getApplication();t&&t.addTweenManager()}();